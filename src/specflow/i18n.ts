import type { Language } from '../../shared/appDataTypes'

type Dict = Record<string, string>

const EN: Dict = {
  toolbar_hand: 'Hand Mode',
  toolbar_hand_desc: 'Pan and navigate around the canvas by clicking and dragging',
  toolbar_select: 'Select Mode',
  toolbar_select_desc: 'Click to select nodes, or drag to create a selection box',
  toolbar_code_search: 'Code Search',
  toolbar_code_search_desc: 'Search through your codebase to find relevant code snippets',
  toolbar_search_conductor: 'Search Conductor',
  toolbar_search_conductor_desc: 'Orchestrate multiple code searches in parallel',
  toolbar_context: 'Context Converter',
  toolbar_context_desc: 'Convert code search results into formatted context for LLM',
  toolbar_instruction: 'Instruction',
  toolbar_instruction_desc: 'Add custom instructions or prompts to guide the workflow',
  toolbar_llm: 'LLM',
  toolbar_llm_desc: 'Process context through a language model to generate responses',
  toolbar_reset: 'Reset Canvas',
  toolbar_reset_desc: 'Clear all node outputs and reset the canvas to idle state',
  toolbar_manual_import: 'Manual Import',
  toolbar_manual_import_desc: 'Select local files/folders (no external search)',

  sidebar_settings: 'Settings',
  sidebar_actions: 'Actions',
  sidebar_output: 'Output',
  sidebar_error: 'Error',
  sidebar_locked: 'Locked',
  sidebar_muted: 'Muted',
  sidebar_type: 'Type',
  sidebar_name: 'Name',
  sidebar_color: 'Color',
  sidebar_name_click: 'click to edit',
  sidebar_color_clear: 'clear',
  sidebar_custom_name: 'Custom Name',
  sidebar_custom_color: 'Color',
  sidebar_clear_color: 'Clear',
  sidebar_run: 'Run',
  sidebar_chain: 'Chain',
  sidebar_predecessors_not_succeeded: "Can't run: predecessors haven't all succeeded",
  sidebar_reset: 'Reset',
  sidebar_delete: 'Delete',
  sidebar_view_all: 'View All',
  sidebar_view_full_output: 'View full output',
  sidebar_copy: 'Copy',
  sidebar_copied: 'Copied',
  sidebar_copy_title: 'Copy to clipboard',
  sidebar_copied_title: 'Copied!',
  sidebar_merged_files: 'Merged File Ranges',

  field_repo_path: 'Repository Path',
  field_query: 'Query',
  field_debug_messages: 'Debug Messages',
  field_full_file_mode: 'Full File Mode',
  field_instruction_text: 'Instruction Text',
  field_system_prompt: 'System Prompt',
  field_model: 'Model',

  placeholder_repo_path: 'e.g., examples/example-repo',
  placeholder_search_query: 'Enter your search query...',
  placeholder_conductor_query: 'Enter query, or leave empty to use predecessor output...',
  placeholder_instruction_text: 'Enter instruction text (or leave empty to use predecessor input)...',
  placeholder_system_prompt: 'Optional system prompt...',
  placeholder_llm_query: 'Enter query (or leave empty to use predecessor input)...',
  placeholder_select_model: 'Select a model...',
  placeholder_no_models: 'No models configured - open Settings to add',

  editor_expand: 'Open in larger editor',
  editor_done: 'Done',
  editor_hint_save: 'Press Escape or click outside to save and close',
  modal_close: 'Close',
  modal_close_esc: 'Close (Esc)',
  output_hint_close: 'Press Escape or click outside to close',

  settings: 'Settings',
  settings_title: 'Settings',
  language: 'Language',
  language_en: 'English',
  language_zh: '中文',

  settings_tab_llm: 'LLM Providers',
  settings_tab_codesearch: 'Code Search',

  providers: 'Providers',
  add: '+ Add',
  provider_name: 'Provider Name',
  endpoint: 'Endpoint URL',
  api_key: 'API Key',
  models: 'Models',
  add_model: '+ Add Model',
  new_model: 'New Model',
  model_id: 'Model ID',
  display_name: 'Display Name',
  no_models_configured: 'No models configured',
  remove_provider: 'Remove Provider',
  no_providers_configured: 'No LLM providers configured.',
  new_provider: 'New Provider',
  add_provider: '+ Add Provider',

  active_provider: 'Active Provider',
  api_key_for_provider: 'API Key',
  enter_api_key_placeholder: 'Enter API key...',
  codesearch_note:
    'Currently only Relace is supported for code search. If no API key is provided here, the server will fall back to reading from the .apikey file.',

  cancel: 'Cancel',
  save_settings: 'Save',
  close: 'Close',
  confirm: 'Confirm',
  save: 'Save',
  save_as: 'Save As',
  saving: 'Saving...',
  load: 'Load',
  new_empty_canvas: 'New Empty Canvas',
  load_from_file: 'Load from File...',
  save_canvas_title: 'Save Canvas',
  load_canvas_title: 'Load Canvas',
  saved_canvases: 'Saved canvases',
  no_saved_canvases: 'No saved canvases.',
  save_canvas_placeholder: 'my-canvas',
  canvas_saved: 'Saved!',
  confirm_overwrite_title: 'Overwrite Canvas?',
  confirm_overwrite_message: 'This file contains a different canvas (ID mismatch). Overwrite anyway?',

  manual_import: 'Manual Import',
  manual_import_repo_path: 'Repository Path',
  manual_import_pick: 'Pick Files / Folders',
  manual_import_selected_items: 'Selected Items',
  manual_import_selected_none: 'None selected',
  manual_import_remove: 'Remove',
  manual_import_dir_note: 'Folders are non-recursive. Only trusted extensions are included.',
  manual_import_repo_required: 'Repository Path is required.',
  manual_import_pick_title: 'Pick Files / Folders',
  manual_import_filter_placeholder: 'Filter current folder...',
  manual_import_trusted_exts: 'Trusted extensions',
  manual_import_loading: 'Loading...',
  manual_import_entries: 'Entries',
  manual_import_empty_dir: 'Empty folder (or no trusted files).',
  manual_import_root: 'Root',
  manual_import_up: 'Up',
  manual_import_selected: 'Selected',
  manual_import_selected_empty: 'Select files or folders from the left.',
  manual_import_done: 'Done',
}

const ZH: Dict = {
  toolbar_hand: '手形模式',
  toolbar_hand_desc: '拖动平移画布（按住鼠标左键拖拽）',
  toolbar_select: '选择模式',
  toolbar_select_desc: '点击选择节点，或拖拽进行框选',
  toolbar_code_search: '代码搜索',
  toolbar_code_search_desc: '在代码库中搜索相关代码片段',
  toolbar_search_conductor: '搜索编排',
  toolbar_search_conductor_desc: '并行编排多个代码搜索查询',
  toolbar_context: '上下文转换',
  toolbar_context_desc: '把搜索结果转换为 LLM 可用的上下文文本',
  toolbar_instruction: '指令',
  toolbar_instruction_desc: '添加自定义指令/提示来引导工作流',
  toolbar_llm: 'LLM',
  toolbar_llm_desc: '把上下文交给模型生成输出',
  toolbar_reset: '重置画布',
  toolbar_reset_desc: '清空所有节点输出并重置为 idle 状态',
  toolbar_manual_import: '手动导入',
  toolbar_manual_import_desc: '选择本地文件/文件夹（不用 agent 搜索）',

  sidebar_settings: '设置',
  sidebar_actions: '操作',
  sidebar_output: '输出',
  sidebar_error: '错误',
  sidebar_locked: '锁定',
  sidebar_muted: '静音',
  sidebar_type: '类型',
  sidebar_name: '名称',
  sidebar_color: '颜色',
  sidebar_name_click: '点击编辑',
  sidebar_color_clear: '清除',
  sidebar_custom_name: '自定义名称',
  sidebar_custom_color: '颜色',
  sidebar_clear_color: '清除',
  sidebar_run: '运行',
  sidebar_chain: '链式运行',
  sidebar_predecessors_not_succeeded: '无法运行：前置节点尚未全部成功',
  sidebar_reset: '重置',
  sidebar_delete: '删除',
  sidebar_view_all: '查看全部',
  sidebar_view_full_output: '查看完整输出',
  sidebar_copy: '复制',
  sidebar_copied: '已复制',
  sidebar_copy_title: '复制到剪贴板',
  sidebar_copied_title: '已复制！',
  sidebar_merged_files: '合并后的文件范围',

  field_repo_path: '仓库路径',
  field_query: '查询',
  field_debug_messages: '调试消息',
  field_full_file_mode: '整文件模式',
  field_instruction_text: '指令文本',
  field_system_prompt: '系统提示',
  field_model: '模型',

  placeholder_repo_path: '例如：examples/example-repo',
  placeholder_search_query: '输入你的搜索问题...',
  placeholder_conductor_query: '输入查询，或留空使用上游输出...',
  placeholder_instruction_text: '输入指令文本（或留空使用上游输入）...',
  placeholder_system_prompt: '可选的 system prompt...',
  placeholder_llm_query: '输入 query（或留空使用上游输入）...',
  placeholder_select_model: '选择一个模型...',
  placeholder_no_models: '暂无模型配置，请先在设置中添加',

  editor_expand: '在大编辑器中打开',
  editor_done: '完成',
  editor_hint_save: '按 Escape 或点击外部以保存并关闭',
  modal_close: '关闭',
  modal_close_esc: '关闭（Esc）',
  output_hint_close: '按 Escape 或点击外部以关闭',

  settings: '设置',
  settings_title: '设置',
  language: '语言',
  language_en: 'English',
  language_zh: '中文',

  settings_tab_llm: 'LLM 提供方',
  settings_tab_codesearch: '代码搜索',

  providers: '提供方',
  add: '+ 添加',
  provider_name: '提供方名称',
  endpoint: 'Endpoint URL',
  api_key: 'API Key',
  models: '模型',
  add_model: '+ 添加模型',
  new_model: '新模型',
  model_id: '模型 ID',
  display_name: '展示名称',
  no_models_configured: '暂无模型配置',
  remove_provider: '移除提供方',
  no_providers_configured: '暂无 LLM 提供方配置。',
  new_provider: '新提供方',
  add_provider: '+ 添加提供方',

  active_provider: '当前提供方',
  api_key_for_provider: 'API Key',
  enter_api_key_placeholder: '输入 API Key...',
  codesearch_note:
    '目前代码搜索仅支持 Relace。如果这里没有填写 API Key，后端会回退到读取 .apikey 文件。',

  cancel: '取消',
  save_settings: '保存',
  close: '关闭',
  confirm: '确认',
  save: '保存',
  save_as: '另存为',
  saving: '保存中...',
  load: '加载',
  new_empty_canvas: '新建空白画布',
  load_from_file: '从文件加载...',
  save_canvas_title: '保存画布',
  load_canvas_title: '加载画布',
  saved_canvases: '已保存画布',
  no_saved_canvases: '还没有保存过的画布。',
  save_canvas_placeholder: 'my-canvas',
  canvas_saved: '已保存！',
  confirm_overwrite_title: '覆盖画布？',
  confirm_overwrite_message: '此文件包含不同画布（ID 不匹配）。仍然覆盖吗？',

  manual_import: '手动导入',
  manual_import_repo_path: '仓库路径',
  manual_import_pick: '选择文件/文件夹',
  manual_import_selected_items: '已选择',
  manual_import_selected_none: '未选择任何项',
  manual_import_remove: '移除',
  manual_import_dir_note: '文件夹不递归；只会包含信任后缀名的文件。',
  manual_import_repo_required: '需要填写仓库路径。',
  manual_import_pick_title: '选择文件/文件夹',
  manual_import_filter_placeholder: '过滤当前目录...',
  manual_import_trusted_exts: '信任后缀',
  manual_import_loading: '加载中...',
  manual_import_entries: '目录内容',
  manual_import_empty_dir: '目录为空（或没有符合后缀的文件）。',
  manual_import_root: '根目录',
  manual_import_up: '上级',
  manual_import_selected: '已选择',
  manual_import_selected_empty: '在左侧选择文件或文件夹。',
  manual_import_done: '完成',
}

function getDict(language: Language): Dict {
  if (language === 'en') return EN
  if (language === 'zh') return ZH
  throw new Error(`Unsupported language: ${language}`)
}

export function t(language: Language, key: string): string {
  const dict = getDict(language)
  const value = dict[key]
  if (typeof value !== 'string') throw new Error(`Missing i18n key: ${key} (lang=${language})`)
  return value
}
